package ex0211.overriding.goods;
import java.util.Scanner;


/**
 ?¤ë³´?? ???¥ì?? ë°??? ê°? ê¸°ë?¥ì?? ?¸ì??´ì? View
*/
public class MenuView{

	 private Scanner sc = new Scanner(System.in);
	// private GoodsService service = new GoodsService(); //????ë³??? ì´?ê¸°í??
	 //?¸ì??ê°? ???? ???±ì??ê°? ???????? ?¸ì?? ????ê±? ???±í?´ì?? ???¬ê? ????. 
	 private GoodsService service;
	 
	 
	 public MenuView(String [][] data) {
		 service = new GoodsService(data);
	      
		 
	 }
  /**
    ??ì²? ë©??´ë?? ì¶??¥í???? ë©????? 
  */
   public void printMenu(){//ë©??¸ì???? ???¬í?? 2ì°¨ì??ë°°ì?´ì?? ì£¼ì??ê°?????
	//???? ë°??? ì´?ê¸°ì? ?°ì?´í?°ë?? ??ë¹??¤ì?? ???¬í?´ì?? ë°°ì?´ì?? ???¥í????.
  //    service.init(data);
      
      
	  while(true){
         System.out.println("---------------------------------------------------------------------------");
		 System.out.println("1.?±ë?     2.??ì²´ê???      3.????ì½???ê²???    4. ??????ê¸?   5. ??????ê¸?   9.ì¢?ë£?");
		 System.out.println("----------------------------------------------------------------------------");

         System.out.print("ë©??? ???? > ");
		 int menuChoice = Integer.parseInt( sc.nextLine());

		 switch(menuChoice){
             case 1 : 
				 this.inputInsert() ; break;
			 case 2 : 
				 Goods [] goodsArr = service.selectAll(); 
			     EndView.printSelectAll(goodsArr);
			      break;
			 case 3 : 
				 this.inputSelectByCode();
				 break;
			 case 4 : 
				 this.inputUpdate() ; 
				 break;
			 case 5:
				 this.inputDeleteCode();
					break;	 
			 case 9 : 
				 System.out.println("?¤ì???? ?? ?´ì?©í?´ì£¼?¸ì??. ??ë¡?ê·¸ë?? ì¢?ë£??©ë????.");
				 System.exit(0); //??ë¡?ê·¸ë?¨ì?ë£? ë©????? 
			 break;
			 default: System.out.println("ë©??´ë?? 1~4 or 9 ë§? ???¥í?´ì£¼?¸ì??.");

		 }//switchë¬?

	  }//whileë¬?

  } //printMenu??

  /**
     ?±ë?ê´??? ?¤ë³´?? ????
  */
  public void inputInsert(){
       //?¤ë³´?????? 4ê°? ë°?ê¸? 
	   System.out.print("????ì½??? > ");
	   String code = sc.nextLine();

	   System.out.print("?????´ë? > ");
	   String name = sc.nextLine();

	   System.out.print("????ê°?ê²? > ");
	   int price = Integer.parseInt(sc.nextLine());

	   System.out.print("?????¤ë? > ");
	   String explain = sc.nextLine();
	   
	   Goods goods = new Goods(code, name, price, explain);
	   
	   InsertResult result = service.insert(goods);

	   switch(result) {
       case INSERT_OUTINDEX:
           EndView.printMessage("???´ì?? ?±ë??? ?? ???µë????.");
           break;
       case INSERT_DUPLICATE:
           EndView.printMessage(code + "?? ì¤?ë³µì?´ë??ë¡? ?±ë????? ???µë????.");
           break;
       case INSERT_SUCCESS:
           EndView.printMessage("?????? ?±ë??????µë????.");
           break;
   }
}
	   
       //Goods goods = new Goods();
//       goods.setCode(code);
//       goods.setName(name);
//       goods.setPrice(price);
//       goods.setExplain(explain);
       
	  // int result = service.insert(goods);
	   

	   //	   }(result== InsertResult.INSERT_OUTINDEX)
//		  EndView.printMessage("???´ì?? ?±ë??? ?? ???µë????.");
//	   else if(result==0)
//		  EndView.printMessage(code+"?? ì¤?ë³µì?´ë??ë¡? ?±ë????? ???µë????.");
//	   else 
//           EndView.printMessage("?????? ?±ë??????µë????.");
	   
	   
	   
//	   if(result==-1)
//		  EndView.printMessage("???´ì?? ?±ë??? ?? ???µë????.");
//	   else if(result==0)
//		  EndView.printMessage(code+"?? ì¤?ë³µì?´ë??ë¡? ?±ë????? ???µë????.");
//	   else 
//           EndView.printMessage("?????? ?±ë??????µë????.");
  

  /**
    ????ì½??? ê²??? ?¤ë³´?? ????
  */
  public void inputSelectByCode(){
       System.out.print("ê²??????¤ë?? ????ì½??? > ");
	   String code = sc.nextLine();

	  Goods goods = service.selectByCode( code );
	  
	  if(goods==null){
          EndView.printMessage(code+"?? ??ëª»ë???? ê²??????? ???µë????.");
	  }else{
          EndView.printSelectByCode(goods);
	  }
  }

  /**
    ??????ê¸? ?¤ë³´?? ???? 
  */
  public void inputUpdate(){
       //?¤ë³´?????? 3ê°? ë°?ê¸? 
	   System.out.print("???????¤ë?? ????ì½??? > ");
	   String code = sc.nextLine();

	   System.out.print("ë³?ê²? ????ê°?ê²? > ");
	   int price = Integer.parseInt(sc.nextLine());

	   System.out.print("ë³?ê²? ?????¤ë? > ");
	   String explain = sc.nextLine();
	   

	   //?? 3ê°??? ??ë³´ë?? ?????? Goodsê°?ì²´ë? ë§?????.
	   Goods goods = new Goods(code, price, explain);
	   //InsertResult result = service.insert(goods);
	   
//	   goods.setCode(code);
//       goods.setPrice(price);
//       goods.setExplain(explain);
	   
	   boolean re = service.update(goods);
	   
	   if(re){
          EndView.printMessage("?????? ?????????µë????.");
	   }else{
          EndView.printMessage("?????? ??????ì§??????µë????.");
	   }


  }//ë©???????

//???? ì½???ë¡? ???? ??ì¹? ì°¾ê¸° ????
  public void inputDeleteCode() {
	    System.out.print("???????¤ë?? ????ì½??? > ");
	    String code = sc.nextLine();

	    int result = service.delete(code);

	    if(result == -1) {
	        EndView.printMessage(code + "?? ì¡´ì?¬í??ì§? ???? ?????? ?? ???µë????.");
	    } else {
	        EndView.printMessage("?????????µë????.");
	    }
	}

	
	

}//?´ë???¤ë??